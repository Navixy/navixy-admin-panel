(function(e){e.masksLoad=function(t){var n;e.ajax({url:t,async:false,dataType:"json",success:function(e){n=e}});return n};e.masksSort=function(t,n,r,i){t.sort(function(t,s){var o=0,u=0;for(;o<t[i].length&&u<s[i].length;){var a=t[i].charAt(o);var f=s[i].charAt(u);if(!r.test(a)){o++;continue}if(!r.test(f)){u++;continue}if(e.inArray(a,n)!=-1&&e.inArray(f,n)==-1){return 1}if(e.inArray(a,n)==-1&&e.inArray(f,n)!=-1){return-1}if(e.inArray(a,n)==-1&&e.inArray(f,n)==-1){if(a!=f){return a<f?-1:1}}o++;u++}for(;o<t[i].length||u<s[i].length;){if(o<t[i].length&&!r.test(t[i].charAt(o))){o++;continue}if(u<s[i].length&&!r.test(s[i].charAt(u))){u++;continue}if(o<t[i].length){return 1}if(u<s[i].length){return-1}}return 0});return t};e.fn.inputmasks=function(t,n){var r=function(e,t){if(typeof e=="number"){t=typeof t=="number"?t:e;if(this.setSelectionRange){this.setSelectionRange(e,t)}else if(this.createTextRange){var n=this.createTextRange();n.collapse(true);n.moveEnd("character",t);n.moveStart("character",e);n.select()}}else{if(this.setSelectionRange){e=this.selectionStart;t=this.selectionEnd}else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5);t=e+n.text.length}return{begin:e,end:t}}};var i=Object.keys||function(e){if(e!==Object(e)){throw new TypeError("Invalid object")}var t=[];for(var n in e){t[t.length]=n}return t};t=e.extend(true,{onMaskChange:e.noop},t);var s={};for(var o in t.inputmask.definitions){var u=t.inputmask.definitions[o].validator;switch(typeof u){case"string":s[o]=new RegExp(u);break;case"object":if("test"in t.definitions[o].validator){s[o]=u}break;case"function":s[o]={test:u};break}}t.inputmask.definitions[t.replace]={validator:t.match.source,cardinality:1};var a=navigator.userAgent.match(/iphone/i)!=null;var f=false;var l=e.extend(true,{},e.inputmask.defaults,t.inputmask).placeholder;var c=e.extend(true,{},e.inputmask.defaults,t.inputmask).insertMode;var h=function(e){var n="";for(var r=0;r<e.length;r++){var o=e.charAt(r);if(o==l){break}if(t.match.test(o)){n+=o}}for(var u in t.list){var a=t.list[u][t.listKey];var f=true;for(var c=0,h=0;c<n.length&&h<a.length;){var p=a.charAt(h);var d=n.charAt(c);if(!t.match.test(p)&&!(p in s)){h++;continue}if(p in s&&s[p].test(d)||d==p){c++;h++}else{f=false;break}}if(f&&c==n.length){var v=a.substr(h).search(t.match)==-1;a=a.replace(new RegExp([t.match.source].concat(i(s)).join("|"),"g"),t.replace);var m=a.substr(h).search(t.replace)==-1;return{mask:a,obj:t.list[u],determined:v,completed:m}}}return false};var p=function(e,n,r){if(!e){return 0}var i=0,s=0;for(;i<r.begin;i++){if(e.charAt(i)==t.replace){s++}}var o=0;for(;i<r.end;i++){if(e.charAt(i)==t.replace){o++}}for(i=0;i<n.length&&(s>0||n.charAt(i)!=t.replace);i++){if(n.charAt(i)==t.replace){s--}}s=i;for(;i<n.length&&o>0;i++){if(n.charAt(i)==t.replace){o--}}o=i;return{begin:s,end:o}};var d=function(){e(this).unbind("keypress.inputmask",b).unbind("input.inputmask",x).unbind("paste.inputmask",x).unbind("dragdrop.inputmask",x).unbind("drop.inputmask",x).unbind("keydown.inputmask",y).unbind("setvalue.inputmask",E).unbind("blur.inputmask",w)};var v=function(){d.call(this);e(this).bindFirst("keypress.inputmask",b).bindFirst("input.inputmask",x).bindFirst("paste.inputmask",x).bindFirst("dragdrop.inputmask",x).bindFirst("drop.inputmask",x).bindFirst("keydown.inputmask",y).bindFirst("setvalue.inputmask",E).bind("blur.inputmask",w)};var m=function(n,i){if(n&&(i||n.mask!=f.mask)){var s;if(!i){s=p(f.mask,n.mask,r.call(this))}if(i){if(this._valueSet){this._valueSet(i)}else{this.value=i}}e(this).inputmask(n.mask,e.extend(true,t.inputmask,{insertMode:c}));if(!i){r.call(this,s.begin,s.end)}}f=n;t.onMaskChange.call(this,n.obj,n.determined);return true};var g=function(t,n,r){var i=h(n);if(!i||i.obj!=f.obj||i.determined!=f.determined){if(i){d.call(this);if(r){m.call(this,i);e(this).trigger(t)}else{e(this).trigger(t);m.call(this,i)}v.call(this)}t.stopImmediatePropagation();return false}return true};var y=function(e){e=e||window.event;var n=e.which||e.charCode||e.keyCode;if(n==8||n==46||a&&n==127){var i=this._valueGet();var s=r.call(this);if(s.begin==s.end||!c&&s.begin==s.end-1){var o=s.begin;do{if(n!=46){o--}var u=i.charAt(o);i=i.substring(0,o)+i.substring(o+1)}while(o>0&&o<i.length&&u!=l&&!t.match.test(u))}else{var f=i.substring(0,s.begin)+i.substring(s.end);if(f.search(t.match)==-1){i=f}}return g.call(this,e,i,false)}if(n==45){c=!c}return true};var b=function(e){var t=this._valueGet();e=e||window.event;var n=e.which||e.charCode||e.keyCode,i=String.fromCharCode(n);caretPos=r.call(this);t=t.substring(0,caretPos.begin)+i+t.substring(caretPos.end);return g.call(this,e,t,true)};var w=function(e){var t=h(this._valueGet());m.call(this,t);v.call(this);return true};var E=function(e){S.call(this);e.stopImmediatePropagation();return true};var S=function(){var e;if(this._valueGet){e=this._valueGet()}else{e=this.value}var t=h(e);while(!t&&e.length>0){e=e.substr(0,e.length-1);t=h(e)}m.call(this,t,e);v.call(this)};var x=function(e){var t=this;setTimeout(function(){S.call(t)},0);e.stopImmediatePropagation();return true};switch(n){case"isCompleted":var T=h(this[0]._valueGet&&this[0]._valueGet()||this[0].value);return T&&T.completed;default:this.each(function(){S.call(this)});return this}}})(jQuery)